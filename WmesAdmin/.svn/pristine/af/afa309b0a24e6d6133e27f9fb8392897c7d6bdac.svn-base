<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fund fees item</title>
    <link href="${base}/res/css/bootstrap-3.3.4.css" rel="stylesheet" type="text/css">
    <link href="${base}/res/css/css.css" rel="stylesheet" type="text/css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
 		<script src="${base}/res/js/html5shiv.min.js"></script>
	  	<script src="${base}/res/js/respond.min.js"></script>
	<![endif]-->
</head>

<body>
<div class="container-fluid pd0" id="wmes_wraper">
    <div class="tab-side container-fluid">
		<div class="tab-side-container">
            <div class="page-header mt-10">
                <h4><b>[@lang_res l=Session["_LANG_CODE_"] k='console.sysmenu.form.title'/]</b></h4>
            </div>
            
            <div class="clear"></div>
            <div class="tab_wrap">
                <!-- tab 1  -->
                <form class="form-horizontal" style="display:block;">
                	<!-- 父节点类型 -->
                   	<div class="form-group">
                        <div class="col-md-3 text-right">
                            <label for="selParentId" class="label-control">[@lang_res l=Session["_LANG_CODE_"] k='console.sysmenu.form.parent'/]</label>
                        </div>
                        <div class="col-md-7">
                        	<select class="form-control " id="selParentId"  name="selParentId">
                            	<option value="">[@lang_res k='global.pleaseSelect'/]</option>
                               [#if menuList?exists && menuList?size gt 0]
                                 [#list menuList as tp]
                                   <option value="${tp.id}" [#if menu.parent?exists&&menu.parent.id == tp.id]selected[/#if]>${tp.nameEn}</option>
                                 [/#list]
                               [/#if]
                            </select> 
                        </div>
                    </div>
                	<!-- 编码 -->
                   	<div class="form-group">
                        <div class="col-md-3 text-right">
                            <label for="txtCode" class="label-control">[@lang_res l=Session["_LANG_CODE_"] k='console.sysmenu.form.code'/]</label>
                        </div>
                        <div class="col-md-7">
                            <input type="text" class="form-control" id="txtCode"  value="${(menu.code)?if_exists}" >
                        </div>
                    </div>
                    
                    <!-- 中文名称 -->
                   <div class="form-group">
                        <div class="col-md-3 text-right">
                            <label for="txtNameSc" class="label-control">[@lang_res  k='console.sysmenu.form.nameSc'/]</label>
                        </div>
                        <div class="col-md-7">
                            <input type="text" class="form-control" id="txtNameSc"  value="${(menu.nameSc)?if_exists}" >
                        </div>
                    </div>
                    
                   <!-- 繁体中文名称 -->
                   <div class="form-group">
                        <div class="col-md-3 text-right">
                            <label for="txtNameTc" class="label-control">[@lang_res  k='console.sysmenu.form.nameTc'/]</label>
                        </div>
                        <div class="col-md-7">
                            <input type="text" class="form-control" id="txtNameTc"  value="${(menu.nameTc)?if_exists}" >
                        </div>
                    </div>
                    
                   <!-- 英文名称 -->
                   <div class="form-group">
                        <div class="col-md-3 text-right">
                            <label for="txtNameEn" class="label-control">[@lang_res  k='console.sysmenu.form.nameEn'/]</label>
                        </div>
                        <div class="col-md-7">
                            <input type="text" class="form-control" id="txtNameEn"  value="${(menu.nameEn)?if_exists}" >
                        </div>
                    </div>
                    
                   <!-- WebUrl -->
                   <div class="form-group">
                        <div class="col-md-3 text-right">
                            <label for="txtWebUrl" class="label-control">[@lang_res  k='console.sysmenu.form.webUrl'/]</label>
                        </div>
                        <div class="col-md-7">
                            <input type="text" class="form-control" id="txtWebUrl"  value="${(menu.webUrl)?if_exists}" >
                        </div>
                    </div>
                    
                   <!-- 排序 -->
                   <div class="form-group">
                        <div class="col-md-3 text-right">
                            <label for="txtOrderBy" class="label-control">[@lang_res  k='console.sysmenu.form.orderBy'/]</label>
                        </div>
                        <div class="col-md-7">
                            <input type="text" class="form-control" id="txtOrderBy"  value="${(menu.orderBy)?if_exists}" >
                        </div>
                    </div>
                                    
                    <div class="form-group">
                        <div class="col-md-3 text-right">
                            <label for="isValidYes" class="label-control">[@lang_res k='console.sysmenu.form.status'/]</label>
                        </div>
                        <div class="col-md-7">                        
                            <input type="radio" name="isValid" id="isValidYes" value="1"  [#if menu?exists ==false || menu.isValid?exists == false || menu.isValid == '1']checked[/#if]>
                            <label for="isValidYes" class="form-font-normal">[@lang_res k='console.sysmenu.form.status.1'/]</label>
                            <input type="radio" name="isValid" id="isValidNO" value="0" [#if menu?exists &&menu.isValid?exists && menu.isValid == '0']checked[/#if]>
                            <label for="isValidNO" class="form-font-normal"> [@lang_res k='console.sysmenu.form.status.0'/]</label>                                                
                        </div>
                    </div>
                    
	                <div class="text-center pd10">
	                    <a href="#" id="btnSave" class="btn-blue-s2">[@lang_res k='console.sysmenu.form.btn.save'/]</a>
	                    <a href="#" id="btnBack" class="btn-blue-s2">[@lang_res k='global.close'/]</a>
	                </div>
                </form>    
                           
            </div>            
        </div>
    </div>
</div>
<script src="${base}/res/js/jquery-1.11.2.min.js" type="text/javascript"></script>
<script src="${base}/res/js/bootstrap.js" type="text/javascript"></script>
<script src="${base}/res/js/js.js" type="text/javascript"></script>

<script type="text/javascript">
	$(function(){
		var id = getUrlParam('id');
	
        //绑定查询按钮事件
        $("#btnSave").click(function () {  
            
        	var id = getUrlParam('id');
        	var parentId = $('#selParentId').val();
        	var code = $('#txtCode').val();
        	var nameSc = $('#txtNameSc').val();
        	var nameTc = $('#txtNameTc').val();
        	var nameEn = $('#txtNameEn').val();
        	var webUrl = $('#txtWebUrl').val();
        	var orderBy = $('#txtOrderBy').val(); 	
        	var isValid = $('input[name="isValid"]:checked').val();
        	
        	
        	if(nameSc == ''){
        		alert('please input name(SC)');
        		return;
        	}else{
        	}
        	   
        	saveData(id,parentId,code,nameSc,nameTc,nameEn,webUrl,orderBy,isValid);     	 
        });  
        
        $("#btnBack").click(function () {  
	        	//backToList();
	        	closeTab();	        
        });                  
	});



  
  	//保存数据
	function saveData(id,parentId,code,nameSc,nameTc,nameEn,webUrl,orderBy,isValid){
	
		$.ajax({
			type : 'post',
			datatype : 'json',
			url : '${base}/sys/menu/save.do?datestr='+new Date().getTime(),
			data : {
				'id': id,'parentId': parentId,'code':code,'nameSc':nameSc,'nameTc':nameTc,'nameEn':nameEn,'webUrl':webUrl,'orderBy':orderBy,'isValid':isValid
			},
			success : function(json) {
				if(null != json){
					alert(json.msg);
					if(true == json.result || 'true' == json.result){
					
					    //modify wwluo 160812
						//window.location.href = '${base}/sys/menu/list.do';
						window.parent.bindList(0);
						//end
					}
				}	
			}
		})
	}
	
	function backToList()
	{		
		window.location.href = '${base}/sys/menu/list.do';
	}
	

</script>
</body>
</html>
