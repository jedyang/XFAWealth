
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>问卷信息</title>
    <link href="${base}/res/console/css/bootstrap-3.3.4.css" rel="stylesheet" type="text/css">
    <link href="${base}/res/console/css/css.css" rel="stylesheet" type="text/css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
 		<script src="${base}/res/js/html5shiv.min.js"></script>
	  	<script src="${base}/res/js/respond.min.js"></script>
	<![endif]-->
</head>

<body>


<div class="container-fluid pd0" id="wmes_wraper">
    <div class="right-side container-fluid">
        <div class="r-side-container" >
            <div class="page-header mt-10">
                <h4><b>问卷信息</b></h4>
            </div>
            <div>
                <form class="form-horizontal">
                    <div class="form-group">
                        <div class="col-md-3 text-right">
                            <label for="txtLoginCode" class="label-control">问卷名称</label>
                        </div>
                        <div class="col-md-7">
                            <input id=txtCompanyName type="text" class="form-control " value="${(WfProcedureInfoVO.procedureName)?if_exists}">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-3 text-right">
                            <label for="selEntitytype" class="label-control">问卷类型</label>
                        </div>
                        <div class="col-md-7">
                            <select id="selEntitytype" class="form-control">
                            			<option value='0'>平台</option>
	                                   <option value='1'>代理商</option>
	                                   <option value='2'>ifa</option>
	                                   
	                            </select> 
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-3 text-right">
                            <label for="selEntitytype" class="label-control">适应客户</label>
                        </div>
                        <div class="col-md-7">
                            <select id="selEntitytype" class="form-control">
                            			<option value='Individual'>[@lang_res  k='console.rpq.Individual'/]</option>
	                                   <option value='Corporate'>[@lang_res  k='console.rpq.Corporate'/]</option>
	                                   <option value='FI'>[@lang_res  k='console.rpq.FI'/]</option>
	                                   
	                            </select> 
                        </div>
                    </div>  
                    <div class="form-group">
                        <div class="col-md-3 text-right">
                            <label for="selEntitytype" class="label-control">问卷语言</label>
                        </div>
                        <div class="col-md-7">
                            <select id="selEntitytype" class="form-control">
                            			<option value='sc'>简体中文</option>
	                                   <option value='tc'>繁体中文</option>
	                                   <option value='en'>英文</option>
	                                   
	                            </select> 
                        </div>
                    </div>     
                    <div class="form-group">
                        <div class="col-md-3 text-right">
                            <label for="selEntitytype" class="label-control">是否默认问卷</label>
                        </div>
                        <div class="col-md-7">
                            <select id="selEntitytype" class="form-control">
                            			<option value='1'>是</option>
	                                   <option value='0'>否</option>  
	                            </select> 
                        </div>
                    </div>  
                    <div class="form-group">
                        <div class="col-md-3 text-right">
                            <label for="selEntitytype" class="label-control">适应类型</label>
                        </div>
                        <div class="col-md-7">
                            <select id="selEntitytype" class="form-control">
                            			<option value='O'>[@lang_res k='console.rpq.openAccountRpq'/]</option>
	                                   <option value='K'>[@lang_res k='console.rpq.KYCrpq'/]</option>
	                            </select> 
                        </div>
                    </div>  
                    <div class="form-group">
                        <div class="col-md-3 text-right">
                            <label for="selEntitytype" class="label-control">问卷状态</label>
                        </div>
                        <div class="col-md-7">
                            <select id="selEntitytype" class="form-control">
                            			<option value='using'>[@lang_res k="global.status.using"/]</option>
	                                   <option value='unusing'>[@lang_res k="global.status.unusing"/]</option>
	                                   <option value='draft'>[@lang_res k="global.status.draft"/]</option>
	                                   <option value='delete'>[@lang_res k="global.status.delete"/]</option>
	                            </select> 
                        </div>
                    </div>        
                    <div class="form-group">
                        <div class="col-md-3 text-right">
                            <label for="txtLoginCode" class="label-control">题目说明</label>
                        </div>
                        <div class="col-md-7">
                            <input id=txtRegisterNo type="text" class="form-control " value="${(WfProcedureInfoVO.procedureName)?if_exists}">
                        </div>
                    </div>
                    
                </form>
                <div class="text-center pd10">
                	<button id="btnSave" class="btn-blue-s" >
							保存
						</button>
                    <a href="#" onclick="javascript:history.go(-1);" class="btn-blue-s2">返回</a>
                </div>
            </div>
            <div class="clear">
            </div>
        </div>
    </div>

</div>
<script src="${base}/res/console/js/jquery-1.11.2.min.js" type="text/javascript"></script>
<script src="${base}/res/console/js/bootstrap.js" type="text/javascript"></script>
<script src="${base}/res/console/js/js.js" type="text/javascript"></script>
<script src="${base}/res/third/layer/layer_v2.js"></script>
<script src="${base}/res/js/util.js"></script>
<script type="text/javascript">
	$(function() {
		//先gen出国家数据
		loadCountry();
		//保存公司信息
		$('#btnSave').on('click',SaveFirm);
		//gen出国家数据
		function loadCountry()
		{
			$.ajax({
            type: "post",
            url : "${base}/console/ifafirm/listCountryJson.do?datestr="+ new Date().getTime(),
            data: {},
            async: false,
            dataType: "json",
            beforeSend: function () {
                    },
            error: function (XMLHttpRequest, textStatus, errorThrown) {

            },
            success: function (data, textStatus) {
                console.log(data);
               var result = data.result;
               if(result==true)
               { 
               var country = data.countryJson;
               var option = '';
               $.each(JSON.parse(country), function (i, n) { 
					var name = n.nameSc;
					var id = n.id;
					option += '<option value="'+id+'">'+name+'</option>'
			   });
			   $('#selIncorporationPlace').empty().append(option);//
			   $('#selCountry').empty().append(option);//所属国家
               }
               else alert('保存败');
            }
        });
		}
		function SaveFirm() {
			var id = getQueryString('id');
			var CompanyName = $('#txtCompanyName').val();
			var Entitytype = $('#selEntitytype').val();
			var RegisterNo = $('#txtRegisterNo').val();
			var IsFinancial = $('#selIsFinancial').val();
			var Giin = $('#txtGiin').val();
			var IncorporationPlace = $('#selIncorporationPlace').val();
			var RegisteredAddress = $('#txtRegisteredAddress').val();
			var MailingAddress = $('#txtMailingAddress').val();
			var Country = $('#selCountry').val();
			
			var postData = { 'id':id,'CompanyName': CompanyName, 'Entitytype': Entitytype, 'RegisterNo': RegisterNo, 'IsFinancial': IsFinancial, 'Giin': Giin, 'IncorporationPlace': IncorporationPlace, 'RegisteredAddress': RegisteredAddress, 'MailingAddress': MailingAddress, 'Country': Country}; 
        	console.log(postData);
        	$.ajax({
	            type: "post",
	            url : "${base}/console/ifafirm/savefirminfo.do?datestr="+ new Date().getTime(),
	            data: postData,
	            async: false,
	            dataType: "json",
	            beforeSend: function () {
	                    },
	            error: function (XMLHttpRequest, textStatus, errorThrown) {
	
	            },
	            success: function (data, textStatus) {
                console.log(data);
               var result = data.result;
               if(result==true)
               { 
               layer.msg('保存成功', {
                            icon: 2,
                            time: 2000
                        }, function () {
                            //window.location.href = 'info_list.do'; 
                        });
               }else{
            	   layer.msg('保存失败', {
                       icon: 1,
                       time: 2000
                   }, function () {
                       //window.location.href = 'info_list.do'; 
                   });
               } 
            }
        });
        
		}
		
	});

	
</script>
</body>
</html>
