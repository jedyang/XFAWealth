<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>[@lang_res k='console.ifafirm.detail.title'/]</title>
		<link href="${base}/res/console/css/bootstrap-3.3.4.css"
			rel="stylesheet" type="text/css">
		<link href="${base}/res/console/css/css.css" rel="stylesheet"
			type="text/css">
		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
 		<script src="${base}/res/js/html5shiv.min.js"></script>
	  	<script src="${base}/res/js/respond.min.js"></script>
	<![endif]-->
	</head>
	<body>
		<div class="container-fluid pd0" id="wmes_wraper">
			<div class="tab-side container-fluid">
				<div class="tab-side-container">
					<div class="page-header mt-10">
						<h4>
							<b>[@lang_res k='console.ifafirm.detail.tab.title'/]</b>
						</h4>
					</div>
					<div class="clear"></div>
					<div>
						<form class="form-horizontal">
						    <input id="hidIfaFirmId" type="hidden" class="form-control"
										value="${(ifafirm.id)?if_exists}">
							<input type="hidden" id="hidEntityType" value="${(ifafirm.entityType)?if_exists}">
							<input type="hidden" id="hidIsFinancial" value="${(ifafirm.isFinancial)?if_exists}">
							<input type="hidden" id="hidCountry" value="${(ifafirm.country)?if_exists}">
							<input type="hidden" id="hidIncorporationPlace" value="${(ifafirm.incorporationPlace)?if_exists}">
							<div class="form-group">
								<div class="col-md-3 text-right">
									<label for="txtCompanyName" class="label-control">
										[@lang_res k='console.ifafirm.detail.form.label.companyName'/]
									</label>
								</div>
								<div class="col-md-7">
								[#if ifafirm?exists && ifafirm.companyNameSc?exists]
									<input id=txtCompanyName type="text" class="form-control "
										value="${(ifafirm.companyNameSc)?if_exists}">
							    [#else]
							    	<input id=txtCompanyName type="text" class="form-control "
										value="${(ifafirm.companyName)?if_exists}">
							    [/#if]
								</div>
							</div>
							<div class="form-group">
								<div class="col-md-3 text-right">
									<label for="txtCompanyNameTc" class="label-control">
										[@lang_res k='console.ifafirm.detail.form.label.companyName'/](繁体)
									</label>
								</div>
								<div class="col-md-7">
									<input id=txtCompanyNameTc type="text" class="form-control "
										value="${(ifafirm.companyNameTc)?if_exists}">
								</div>
							</div>
							<div class="form-group">
								<div class="col-md-3 text-right">
									<label for="txtCompanyNameEn" class="label-control">
										[@lang_res k='console.ifafirm.detail.form.label.companyName'/](英文)
									</label>
								</div>
								<div class="col-md-7">
									<input id=txtCompanyNameEn type="text" class="form-control "
										value="${(ifafirm.companyNameEn)?if_exists}">
								</div>
							</div>
							<div class="form-group">
								<div class="col-md-3 text-right">
									<label for="selEntityType" class="label-control">
										[@lang_res k='console.ifafirm.detail.form.label.entityType'/]
									</label>
								</div>
								<div class="col-md-7">
									<select id="selEntityType" class="form-control">
										<option value='1'>
											[@lang_res k='console.ifafirm.detail.form.select.entityType.1'/]
										</option>
										<option value='2'>
											[@lang_res k='console.ifafirm.detail.form.select.entityType.2'/]
										</option>
										<option value='3'>
											[@lang_res k='console.ifafirm.detail.form.select.entityType.3'/]
										</option>
										<option value='4'>
											[@lang_res k='console.ifafirm.detail.form.select.entityType.4'/]
										</option>
										<option value='5'>
											[@lang_res k='console.ifafirm.detail.form.select.entityType.5'/]
										</option>
									</select>
								</div>
							</div>
							<div class="form-group">
								<div class="col-md-3 text-right">
									<label for="txtRegisterNo" class="label-control">
										[@lang_res k='console.ifafirm.detail.form.label.registerNo'/]
									</label>
								</div>
								<div class="col-md-7">
									<input id="txtRegisterNo" type="text" class="form-control "
										value="${(ifafirm.registerNo)?if_exists}">
								</div>
							</div>
							<div class="form-group">
								<div class="col-md-3 text-right">
									<label for="selIsFinancial" class="label-control">
										[@lang_res k='console.ifafirm.detail.form.label.isFinancial'/]
									</label>
								</div>
								<div class="col-md-7">
									<select id="selIsFinancial" class="form-control">
										<option value='1'>
											[@lang_res k='global.true'/]
										</option>
										<option value='0'>
											[@lang_res k='global.false'/]
										</option>
									</select>
								</div>
							</div>
							<div class="form-group">
								<div class="col-md-3 text-right">
									<label for="txtGiin" class="label-control">
										[@lang_res k='console.ifafirm.detail.form.label.giin'/]
									</label>
								</div>
								<div class="col-md-7">
									<input id=txtGiin type="text" class="form-control "
										value="${(ifafirm.giin)?if_exists}">
								</div>
							</div>
							<div class="form-group">
								<div class="col-md-3 text-right">
									<label for="txtNaturePurpose" class="label-control">
										[@lang_res k='console.ifafirm.detail.form.label.naturePurpose'/]
									</label>
								</div>
								<div class="col-md-7">
									<input id="txtNaturePurpose" type="text" class="form-control "
										value="${(ifafirm.naturePurpose)?if_exists}">
								</div>
							</div>
							<div class="form-group">
								<div class="col-md-3 text-right">
									<label for="dtIncorporationDate" class="label-control">
										[@lang_res k='console.ifafirm.detail.form.label.incorporationDate'/]
									</label>
								</div>
								<div class="col-md-7">
									<!--<input id="dtIncorporationDate" type="text"
										class="form-control "
										value="${(ifafirm.incorporationDate)?if_exists}">
								    --><input id='dtIncorporationDate' type="text" 
								        class="laydate-icon form-control form-control-laydate" 
								        style="height: 34px; padding: 6px 12px;" 
								        onclick="laydate({istime: false, format: 'YYYY-MM-DD'})" name="born" value="${(ifafirm.incorporationDate)?if_exists}">										
								</div>
							</div>
							<div class="form-group">
								<div class="col-md-3 text-right">
									<label for="txtIncorporationPlace" class="label-control">
										[@lang_res k='console.ifafirm.detail.form.label.incorporationPlace'/]
									</label>
								</div>
								<div class="col-md-7">
									<select id="selIncorporationPlace" class="form-control">
									</select>
								</div>
							</div>
							<div class="form-group">
								<div class="col-md-3 text-right">
									<label for="txtRegisteredAddress" class="label-control">
										[@lang_res k='console.ifafirm.detail.form.label.registeredAddress'/]
									</label>
								</div>
								<div class="col-md-7">
									<input id="txtRegisteredAddress" type="text"
										class="form-control "
										value="${(ifafirm.registeredAddress)?if_exists}">
								</div>
							</div>
							<div class="form-group">
								<div class="col-md-3 text-right">
									<label for="txtMailingAddress" class="label-control">
										[@lang_res k='console.ifafirm.detail.form.label.mailingAddress'/]
									</label>
								</div>
								<div class="col-md-7">
									<input id="txtMailingAddress" type="text" class="form-control "
										value="${(ifafirm.mailingAddress)?if_exists}">
								</div>
							</div>
							<div class="form-group">
								<div class="col-md-3 text-right">
									<label for="txtCountry" class="label-control">
										[@lang_res k='console.ifafirm.detail.form.label.country'/]
									</label>
								</div>
								<div class="col-md-7">
								    <select id="selCountry" class="form-control">
									</select>
								</div>
							</div>
							<div class="form-group">
								<div class="col-md-3 text-right">
									<label for="txtWebsite" class="label-control">
										[@lang_res k='console.ifafirm.detail.form.label.website'/]
									</label>
								</div>
								<div class="col-md-7">
									<input id="txtWebsite" type="text" class="form-control "
										value="${(ifafirm.website)?if_exists}">
								</div>
							</div>
						</form>
						<div class="text-center pd10">
							<button id="btnSave" onclick="savefrom()" type="button"
								class="btn btn-primary">
								[@lang_res k='global.save'/]
							</button>
							<button onclick="closeTab()" type="button"
								class="btn btn-default">
								[@lang_res k='global.close'/]
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		</body>
		<script src="${base}/res/console/js/jquery-1.11.2.min.js"
			type="text/javascript"></script>
		<script src="${base}/res/console/js/bootstrap.js"
			type="text/javascript"></script>
		<script src="${base}/res/third/layer/layer_v2.js"></script>
		<script src="${base}/res/console/js/js.js" type="text/javascript"></script>
		<script src="${base}/res/third/laydate/laydate.js" type="text/javascript"></script>
		<script type="text/javascript">
		$(function(){
			loadCountry();
			$('#selEntityType').val($('#hidEntityType').val());
			$('#selIsFinancial').val($('#hidIsFinancial').val());
			$('#selCountry').val($('#hidCountry').val());
			$('#selIncorporationPlace').val($('#hidIncorporationPlace').val());
		});
		
		function loadCountry(){
			$.ajax({
	            type: "post",
	            url : "${base}/console/ifafirm/listCountryJson.do?datestr="+ new Date().getTime(),
	            data: {},
	            async: false,
	            dataType: "json",
	            success: function (data, textStatus) {
	               var result = data.result;
	               if(result==true){ 
	               var country = data.countryJson;
	               var option = '';
	               $.each(JSON.parse(country), function (i, n) { 
						var name = n.nameSc;
						var id = n.id;
						option += '<option value="'+id+'">'+name+'</option>';
				   });
				   $('#selIncorporationPlace').empty().append(option);
				   $('#selCountry').empty().append(option);
	               }
	            }
        	});
		}
		
		function savefrom() {
			var id = $('#hidIfaFirmId').val();
			var CompanyName = $('#txtCompanyName').val();
			var Entitytype = $('#selEntityType').val();
			var RegisterNo = $('#txtRegisterNo').val();
			var IsFinancial = $('#selIsFinancial').val();
			var Giin = $('#txtGiin').val();
			var NaturePurpose = $('#txtNaturePurpose').val();//
			var IncorporationDate = $('#dtIncorporationDate').val();//
			var IncorporationPlace = $('#selIncorporationPlace').val();
			var RegisteredAddress = $('#txtRegisteredAddress').val();
			var MailingAddress = $('#txtMailingAddress').val();
			var Country = $('#selCountry').val();
			var Website = $('#txtWebsite').val();//
			var CompanyNameTc = $('#txtCompanyNameTc').val();//
			var CompanyNameEn = $('#txtCompanyNameEn').val();//
			
			var postData = { 'id':id,'CompanyName': CompanyName, 'Entitytype': Entitytype, 'RegisterNo': RegisterNo, 'IsFinancial': IsFinancial, 'Giin': Giin, 'IncorporationPlace': IncorporationPlace, 'RegisteredAddress': RegisteredAddress, 'MailingAddress': MailingAddress, 'Country': Country,
			                 'NaturePurpose':NaturePurpose,'IncorporationDate':IncorporationDate,'Website':Website,
			                 'CompanyNameTc':CompanyNameTc,'CompanyNameEn':CompanyNameEn
			                 }; 
        	//console.log(postData);
        	$.ajax({
	            type: "post",
	            url : "${base}/console/ifafirm/savefirminfo.do?datestr="+ new Date().getTime(),
	            data: postData,
	            async: false,
	            dataType: "json",
	            success: function (data, textStatus) {
	               var result = data.result;
	               if(result==true){ 
	               		layer.msg("[@lang_res k='global.success'/]", { icon: 1, time: 2000 });
	               		$('#btnSave').attr('disabled','disabled');
	               		window.parent.bindIfafirmList(0);
	               }else
	               		layer.msg("[@lang_res k='global.failed'/]", { icon: 0, time: 2000 });
	            }
        	});
		}
		</script>
</html>
